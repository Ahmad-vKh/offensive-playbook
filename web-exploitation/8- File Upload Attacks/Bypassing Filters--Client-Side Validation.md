
Many web applications only rely on front-end JavaScript code to validate the selected file format before it is uploaded and would not upload it if the file is not in the required forma

file format validation is happening on the client-side

easily bypass it:
1- `by directly interacting with the server,`
2-`skipping the front-end validations altogether`
3-`modify the front-end code through our browser's dev tools to disable any validation in place`


## Client-Side Validation

case: upload <> limited to image formats only

how to know the validation is happening in front-end:
	page never refreshes or sends any HTTP requests after selecting our file

>Any code that runs on the client-side is under our control

process:
>While the web server is responsible for sending the front-end code, the rendering and execution of the front-end code happen within our browser.

methodology:
1- `modify the upload request to the back-end server`
2- `manipulate the front-end code to disable these type validations`


## 1- Back-end Request Modification
`Burp` is your friend

upload valid file > refresh the page > persists ?? > back end process happened

>capture the upload request with `Burp`

modify:

![[6y21jlmv.png]]

**Note:** We may also modify the `Content-Type` of the uploaded file


## 2-Disabling Front-end Validation

Front-end > functions are being completely processed within our web browser

`no burp`

do inspect on the image 

HTML file input:
```html
<input type="file" name="uploadFile" id="uploadFile" onchange="checkFile(this)" accept=".jpg,.jpeg,.png">
```
However, we can easily modify this and select `All Files` as we did before

where validation happens:
>The more interesting part is `onchange="checkFile(this)"`, which appears to run a JavaScript code whenever we select a file


go to the browser's `Console` by clicking [`CTRL+SHIFT+K`], and then we can type the function's name (`checkFile`) to get its details:
```javascript
function checkFile(File) {
...SNIP...
    if (extension !== 'jpg' && extension !== 'jpeg' && extension !== 'png') {
        $('#error_message').text("Only images are allowed!");
        File.form.reset();
        $("#submit").attr("disabled", true);
    ...SNIP...
    }
}
```

solution:
add `PHP` as one of the allowed extensions or modify the function to remove the extension check.

go back to our inspector, click on the profile image again, double-click on the function name (`checkFile`) on line `18`, and delete it:

>The modification we made to the source code is temporary and will not persist through page refreshes, as we are only changing it on the client-side. However, our only need is to bypass the client-side validation, so it should be enough for this purpose.


after upload .php:
```html
<img src="/profile_images/shell.php" class="profile-image" id="profile-image">
```
click on the above link, we will get to our uploaded web shell??

```bash
http://SERVER_IP:PORT/profile_images/shell.php?cmd=id
```


```



```


http://94.237.53.203:55256/contact/user_feedback_submissions/250404_Untitled.pht.jpeg