##  Introduction
Most modern web applications utilize a database structure on the back-end. Such databases are used to store and retrieve data related to the web application, from actual web content to user information and content, and so on. To make the web applications dynamic, the web application has to interact with the database in real-time. As HTTP(S) requests arrive from the user, the web application's back-end will issue queries to the database to build the response. These queries can include information from the HTTP(S) request or other relevant informatio

![Diagram of a three-tier architecture: User interacts with a client application at Tier I, which connects to an application server at Tier II, and a DBMS at Tier III](https://academy.hackthebox.com/storage/modules/33/db_request_3.png)

In computing, SQL injection is a code injection technique used to attack data-driven applications, in which malicious SQL statements are inserted into an entry field for execution.


Many types of injection vulnerabilities are possible within web applications:
1- http inection
2- code injection
3- command injection
4- sql injection

>`A SQL injection occurs when a malicious user attempts to pass input that changes the final SQL query sent by the web application to the database, enabling the user to perform other unintended SQL queries directly against the database.`

---


```sql
single quote (`'`) or a double quote (`"`) to escape the limits of user input and inject data directly into the SQL query
[stacked] or [Union] sql injection 
```


### ðŸ”¹ `[stacked]` SQL Injection

**Stacked queries** allow you to run **multiple SQL statements** in one request, separated by a semicolon (`;`).
```sql
1; DROP TABLE users--
```
### ðŸ”¥ TL;DR - When to Use What

|Goal|Use|
|---|---|
|Dump data|`UNION` SQLi|
|Modify DB, run commands|`stacked` SQLi|
|File write/read (like `xp_cmdshell`, `into outfile`)|`stacked`|
|Bypass login|Both, depending on context|

---

like user logins and passwords or credit card information, which can then be used for other malicious purposes. SQL injections cause many password and data breaches against websites, which are then re-used to steal user accounts, access other services, or perform other nefarious actions.


bypassing login without passing a valid pair of username and password credentials. Another example is accessing features that are locked to specific users, like admin panels. Attackers may also be able to read and write files directly on the back-end server, which may, in turn, lead to placing back doors on the back-end server, and gaining direct control over it, and eventually taking control over the entire website.



# Intro to Databases

Structured Query Language (SQL)

```sql
Web applications utilize back-end databases to store various content and information related to the web application. This can be core web application assets like images and files, content like posts and updates, or user data like usernames and passwords.
```


## Database Management Systems (DBMS)
A Database Management System (DBMS) helps create, define, host, and manage databases
DBMS is used in various banking, finance, and education sectors to record large amounts of data. Some of the essential features of a DBMS include:

|**Feature**|**Description**|
|---|---|
|`Concurrency`|A real-world application might have multiple users interacting with it simultaneously. A DBMS makes sure that these concurrent interactions succeed without corrupting or losing any data.|
|`Consistency`|With so many concurrent interactions, the DBMS needs to ensure that the data remains consistent and valid throughout the database.|
|`Security`|DBMS provides fine-grained security controls through user authentication and permissions. This will prevent unauthorized viewing or editing of sensitive data.|
|`Reliability`|It is easy to backup databases and rolls them back to a previous state in case of data loss or a breach.|
|`Structured Query Language`|SQL simplifies user interaction with the database w|






DBMS is used in various banking, finance, and education sectors to record large amounts of data. Some of the essential features of a DBMS include:

| **Feature**                 | **Description**                                                                                                                                                                            |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `Concurrency`               | A real-world application might have multiple users interacting with it simultaneously. A DBMS makes sure that these concurrent interactions succeed without corrupting or losing any data. |
| `Consistency`               | With so many concurrent interactions, the DBMS needs to ensure that the data remains consistent and valid throughout the database.                                                         |
| `Security`                  | DBMS provides fine-grained security controls through user authentication and permissions. This will prevent unauthorized viewing or editing of sensitive data.                             |
| `Reliability`               | It is easy to backup databases and rolls them back to a previous state in case of data loss or a breach.                                                                                   |
| `Structured Query Language` | SQL simplifies user interaction with the database w                                                                                                                                        |


![Three-tier architecture diagram: User interacts with a client application at Tier I, which connects to an application server at Tier II, and a DBMS at Tier III. Users and a database administrator access the DBMS.](https://academy.hackthebox.com/storage/modules/33/db_2.png)

The second tier is the middleware, which interprets these events and puts them in a form required by the DBMS. Finally, the application layer uses specific libraries and drivers based on the type of DBMS to interact with them. The DBMS receives queries from the second tier and performs the requested operations. These operations could include insertion, retrieval, deletion, or updating of data. After processing, the DBMS returns any requested data or error codes in the event of invalid queries.

# Types of Databases

1- relational database 
2- non-relational database

---

relational database most common
Tables in a relational database are associated with keys that provide a quick database summary or access to the specific row or column when specific data needs to be reviewed. These tables, also called entities, are all related to each other

![Database schema diagram showing 'users' table with columns: id, username, first_name, last_name, and 'posts' table with columns: id, user_id, date, content. Arrows indicate relationships between user_id in 'posts' and id in 'users'.](https://academy.hackthebox.com/storage/modules/75/web_apps_relational_db.jpg)

A table can have more than one key, as another column can be used as a key to link with another table.

>The relationship between tables within a database is called a Schema.

`relational databases is  1MySQL`

 non-relational database:

```json
{
  "100001": {
    "date": "01-01-2021",
    "content": "Welcome to this web application."
  },
  "100002": {
    "date": "02-01-2021",
    "content": "This is the first post on this web app."
  },
  "100003": {
    "date": "02-01-2021",
    "content": "Reminder: Tomorrow is the ..."
  }
}
```
It looks similar to a dictionary item in languages like `Python`









